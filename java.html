<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>
<input type="file" id="video-input" accept="video/*">

<script>
const videoInput = document.getElementById("video-input");

function loadVideo() {
  const video = document.createElement("video");
  video.src = URL.createObjectURL(videoInput.files[0]);
  video.onloadedmetadata = function() {
    const halfDuration = Math.floor(video.duration / 2);
    const firstSegment = video.src + "#t=0," + halfDuration;
    const secondSegment = video.src + "#t=" + halfDuration + ",999999";
    const firstM3U8 = createM3U8(firstSegment);
    const secondM3U8 = createM3U8(secondSegment);
  };
}

function createM3U8(videoUrl) {
  const m3u8Content = "#EXTM3U\n#EXT-X-VERSION:3\n#EXT-X-TARGETDURATION:10\n#EXT-X-MEDIA-SEQUENCE:0\n#EXTINF:10.0,\n" + videoUrl + "\n#EXT-X-ENDLIST";
  return m3u8Content;
}

videoInput.addEventListener("change", loadVideo);
</script>
</body>
</html>
